webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,i){t.exports=i("NHnr")},1:function(t,e){},HHqe:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("/5sW"),o=(i("gbyG"),i("Gh7F"),i("jOQl")),r=i.n(o),s=i("iPd/"),a=i.n(s),l=i("8kuj"),c=i.n(l),u={name:"ObjectView",props:{object:!1},data:function(){return{isShown:!1}},methods:{toggle:function(){this.isShown=!this.isShown}}},m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{attrs:{src:t.object.edm_preview,alt:t.object.application.description},on:{click:function(e){t.toggle()}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShown,expression:"isShown"}],staticClass:"details"},[i("img",{attrs:{src:t.object.edm_preview,alt:t.object.application.description}}),i("p",[t._v(t._s(t.object.application.description))]),i("a",{attrs:{href:t.object.edm_rights}},[t._v("License")]),i("a",{attrs:{href:t.object.edm_is_shown_at}},[t._v("Source")]),i("br"),i("button",{on:{click:function(e){t.toggle()}}},[t._v("toggle object")])])])},d=[],g=i("XyMi");function f(t){i("SWkL")}var p=!1,h=f,v="data-v-0532d95e",b=null,w=Object(g["a"])(u,m,d,p,h,v,b),_=w.exports,F={name:"FilterMenu",data:function(){return{isShown:!1,strumporBtnWidth:40,byxorBtnWidth:40}},computed:{colorFilterStatus:function(){return et.state.colorFilterActive}},methods:{toggle:function(){var t=et.state.allItems.length,e=et.state.allItems.filter(function(t){return t.application.garment.includes("strumpor")}).length,i=et.state.allItems.filter(function(t){return t.application.garment.includes("byxor")}).length,n=e/t*100,o=i/t*100;this.strumporBtnWidth=n,this.byxorBtnWidth=o,this.isShown=!this.isShown},toggleGarment:function(t,e){console.log(e),"false"===t.target.getAttribute("aria-pressed")?(console.log(!0),t.target.setAttribute("aria-pressed","true")):(console.log(!1),t.target.setAttribute("aria-pressed","false")),et.commit("toggleGarment",e)},updateColorFilter:function(t){et.commit("activateColorFilter"),et.commit("setColorFilter",t.target.value.substring(1))},resetColorFilter:function(){et.commit("deactivateColorFilter")}}},S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("div",{staticClass:"minified",class:{open:t.isShown},on:{click:function(e){t.toggle()}}},[t.isShown?i("span",[t._v("close filter")]):t._e(),t.isShown?t._e():i("span",[t._v("open filter")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShown,expression:"isShown"}],staticClass:"expanded"},[i("div",{staticClass:"toogle-garmet-btns"},[i("div",{style:{width:t.strumporBtnWidth+"%"},attrs:{role:"button","aria-pressed":"false"},on:{click:function(e){t.toggleGarment(e,"strumpor")}}},[t._v("Strumpor")]),i("div",{style:{width:t.byxorBtnWidth+"%"},attrs:{role:"button","aria-pressed":"false"},on:{click:function(e){t.toggleGarment(e,"byxor")}}},[t._v("Byxor")])]),i("input",{attrs:{type:"color"},on:{change:function(e){t.updateColorFilter(e)}}}),t.colorFilterStatus?i("button",{on:{click:function(e){t.resetColorFilter()}}},[t._v("Reset color")]):t._e()])])},I=[];function L(t){i("HHqe")}var C=!1,j=L,x="data-v-5bb09ccc",y=null,W=Object(g["a"])(F,S,I,C,j,x,y),k=W.exports,A={name:"ImageWall",components:{isotope:r.a,ObjectView:_,FilterMenu:k,Spinner:c.a},directives:{imagesLoaded:a.a},computed:{list:function(){var t=this,e=et.state.allItems;return console.log("debug: executing filtering"),e?(et.state.garmentFilter.length>0&&(e=e.filter(function(t){return et.state.garmentFilter.some(function(e){return t.application.garment.includes(e)})})),et.state.colorFilterActive&&(e=e.filter(function(e){return e.application.colors.some(function(e){return e.score>.1&&t.isSimilarColor(e.hex,et.state.colorFilter)})})),et.state.visibleLimit===this.visibleLimit?(console.log("debug: reseting visibleLimit"),et.commit("resetVisibleLimit"),window.scrollTo(0,0)):this.visibleLimit=et.state.visibleLimit,e.slice(0,et.state.visibleLimit)):null},loading:function(){return et.state.isLoadingImages}},data:function(){return{option:{getSortData:{id:"id"},sortBy:"id"},latestVisibleLimit:15}},methods:{imageChange:function(t){this.$refs.cpt.layout("masonry"),t.isComplete?et.commit("notLoadingImages"):et.commit("loadingImages")},isSimilarColor:function(t,e){var i=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16),r=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),l=255-Math.abs(i-r),c=255-Math.abs(n-s),u=255-Math.abs(o-a);l/=255,c/=255,u/=255;var m=(l+c+u)/3;return m>=.9}}},O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loading?i("spinner",{staticClass:"spinner",attrs:{size:"big"}}):t._e(),t.list?i("isotope",{directives:[{name:"images-loaded",rawName:"v-images-loaded:on.progress",value:t.imageChange,expression:"imageChange",arg:"on",modifiers:{progress:!0}}],ref:"cpt",attrs:{list:t.list,id:"root_isotope",options:t.option}},t._l(t.list,function(t){return i("div",{key:t.europeana_record,staticClass:"image"},[i("ObjectView",{attrs:{object:t}})],1)})):t._e(),i("FilterMenu")],1)},V=[];function G(t){i("Zhv7")}var M=!1,B=G,H="data-v-90503692",$=null,E=Object(g["a"])(A,O,V,M,B,H,$),N=E.exports,P={name:"app",components:{ImageWall:N},methods:{fetchIntoState:function(){this.$http.get("data.json").then(function(t){return t.body}).then(function(t){return et.commit("addAllItems",t)})},handleScroll:function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&(et.state.isLoadingImages||et.commit("increaseVisibleLimit",5))}},beforeMount:function(){this.fetchIntoState()},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("ImageWall")],1)},T=[];function Y(t){i("+VGo")}var Z=!1,z=Y,D=null,J=null,Q=Object(g["a"])(P,q,T,Z,z,D,J),R=Q.exports,X=i("PlbA"),K=i.n(X),U=i("8+8L"),tt=i("NYxO");i.d(e,"store",function(){return et}),n["default"].use(K.a),n["default"].use(U["a"]),n["default"].use(tt["a"]),n["default"].config.productionTip=!1;var et=new tt["a"].Store({state:{allItems:null,visibleLimit:15,garmentFilter:[],colorFilterActive:!1,colorFilter:!1,isLoadingImages:!1},mutations:{addAllItems:function(t,e){t.allItems=e},increaseVisibleLimit:function(t,e){t.visibleLimit+=e},resetVisibleLimit:function(t){t.visibleLimit=15},toggleGarment:function(t,e){var i=t.garmentFilter.indexOf(e);-1===i?t.garmentFilter.push(e):t.garmentFilter.splice(i,1)},loadingImages:function(t){return t.isLoadingImages=!0},notLoadingImages:function(t){return t.isLoadingImages=!1},activateColorFilter:function(t){return t.colorFilterActive=!0},deactivateColorFilter:function(t){return t.colorFilterActive=!1},setColorFilter:function(t,e){return t.colorFilter=e}}});new n["default"]({render:function(t){return t(R)}}).$mount("#app")},SWkL:function(t,e){},Zhv7:function(t,e){}},[0]);
//# sourceMappingURL=app.1de83fc2.js.map